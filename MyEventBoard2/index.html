<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MyEventBoard</title>
  <!-- MDB icon -->
  <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Material Design Bootstrap -->
  <link rel="stylesheet" href="css/mdb.min.css">
  <!-- Your custom styles (optional) -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="indexStyles.css">


</head>




<body>


<!-- Website Header -------------------------------------->
<div class="header">
  <img src="beaver-logo.png" width="75px" height="75px"></img>
  <a href="#default" class="logo">MyEventBoard</a>
</div>


<!-- Nav Bar ---------------------------------------->

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>


<!-- Side Bar -------------------------------->
 <div class="d-flex" id="wrapper">
 <div class="bg-light border-right side-bar" id="sidebar-wrapper">
      <div class="list-group list-group-flush">
        <a href="#" class="list-group-item list-group-item-action bg-light">My Events</a>
        <a href="#" class="list-group-item list-group-item-action bg-light">My Invites</a>
		<a href="#" class="list-group-item list-group-item-action bg-light">Create an Event</a>

      </div>
 </div>



  <!-- Start your project here-->

<div class="container objectSpace">

<h2> Create an Event </h2>


<div class="container entryField1">

	<form class="form-horizatonal needs-validation" novalidate>

		<div class="form-group">
			<label for="eventNameInput">Event Name</label>
			<span class="requiredSign"> * </span>
			<input type="text" class="form-control" id="eventNameInput" placeholder="Enter a name">
		</div>

		<div class="form-group">
			<label for="locationInput">Location</label>
			<span class="requiredSign"> * </span>
			<input type="text" class="form-control" id="locationInput" placeholder="Enter location">
		</div>

		<div class="form-group">
			<label for="eventDescriptTextArea">Event Description</label>
			<textarea class="form-control rounded-0" id="eventDescriptTextArea" rows="3"></textarea>
		</div>

		<div class="form-group">
			<label for="timeslotCapInput">Capacity per Timeslot</label>
			<span style="padding-left:10px" class="fa fa-question-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="The number of people that can sign up for each specific timeslot for this event. Defaults to 1"></span>
			<input type="number" class="form-control mb-4" id="timeslotCapInput" placeholder="Enter a capacity (default: 1)">
		</div>

		<div class="form-group">
			<label for="dumpFileInput">User Notification Dump File</label>
			<span style="padding-left:10px" class="fa fa-question-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Required Format: Email List in Text File. Sends a notification of Event to all listed Oregon State University Emails"></span>
			<input type="file" class="form-control-file" id="exampleFormControlFile1">
		</div>

		<!-- Default unchecked -->
		<div class="form-group">
			<div class="custom-control custom-checkbox">
			<input type="checkbox" class="custom-control-input" id="defaultUnchecked">
			<label class="custom-control-label" for="defaultUnchecked">Enable User File Upload</label>
			<span style="padding-left:10px" class="fa fa-question-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Allows users to upload a PDF when registering for this event"></span>
			</div>
		</div>

	</form>

	<div class="nextBackField form-group">
		<button type="button" class="btn btn-primary nextBackField" id="field1to2">Next</button>
	</div>
</div>



<div class="container collapse entryField2">

	<form>

		<div class="form-group">
			<label for="eventSlotDurationInput">Slot Duration</label>
			<select class="browser-default custom-select" id="durationSelector">
			  <option>15 Minutes</option>
			  <option>30 Minutes</option>
			  <option selected>1 Hour </option>
			</select>
		</div>

		<div class="form-group">
			<label for="eventDateInput">Event Dates</label>
			<text class="requiredSign">*</text>
			<!-- Date Picker   Source: https://jsfiddle.net/christianklemp_imt/b20paum2/ -->
			<div class="input-group date form-group" id="datepicker">
				<input readonly type="text" class="form-control" id="Dates" name="Dates" placeholder="Select days" required />
			<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i><span class="count"></span></span>
			</div>
		</div>
	</form>

	<form class ="timeSelectionField">
	<div class="table-responsive">
	<table class="table-sm timeSelector" id="timeSelector">
	  <thead>
		<tr>
		  <th scope="col">Time</th>
		</tr>
	  </thead>
	  <tbody>

		<tr>
		  <th scope="row">7:00 AM</th>
		</tr>

		<tr>
		  <th scope="row">8:00 AM</th>
		</tr>

		<tr>
		  <th scope="row">9:00 AM</th>
		</tr>

		<tr>
		  <th scope="row">10:00 AM</th>
		</tr>

		<tr>
		  <th scope="row">11:00 AM</th>
		</tr>

		<tr>
		  <th scope="row">12:00 PM</th>
		</tr>

		<tr>
		  <th scope="row">1:00 PM</th>
		</tr>

		<tr>
		  <th scope="row">2:00 PM</th>
		</tr>

		<tr>
		  <th scope="row">3:00 PM</th>
		</tr>

		<tr>
		  <th scope="row">4:00 PM</th>
		</tr>

		<tr>
		  <th scope="row">5:00 PM</th>
		</tr>

		<tr>
		  <th scope="row">6:00 PM</th>
		</tr>

		<tr>
		  <th scope="row">7:00 PM</th>
		</tr>

	  </tbody>
	</table>
	</div>
	</form>

<div class="row nextBackField form-group">
	<div class="col-xs-6">
		<button type="button" class="btn btn-primary nextBackField" id="field2to1">Go Back</button>
	</div>
	<div class="col-xs-6">
		<button type="button" class="btn btn-primary nextBackField" id="field2toSubmit">Submit</button>
	</div>
</div>

</div>

<div class="container collapse submitField">
<text>Your Event has Been Created</text>
</div>


</div>



   <!-- jQuery -->
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>
  <!-- Your custom scripts (optional) -->
  <script type="text/javascript"></script>
  <!-- Include Date Range Picker -->

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

  <!-- End your project here-->

</body>
</html>

<script>
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
</script>

<script>
window.onload = function(){

	document.getElementById("field1to2").addEventListener("click", function()
	{
		$('.entryField1').addClass('collapse');
		$('.entryField2').removeClass('collapse');
	})

	document.getElementById("field2toSubmit").addEventListener("click", function()
	{
    cellCount();
		$('.entryField2').addClass('collapse');
		$('.submitField').removeClass('collapse')
	})

	document.getElementById("field2to1").addEventListener("click", function()
	{
		$('.entryField2').addClass('collapse');
		$('.entryField1').removeClass('collapse');


	})

}

</script>

<script>
function minutesToFormat(totalMinutes)
{

	if (totalMinutes.search("AM") != -1 || totalMinutes.search("PM") != -1)
	{
		console.log(totalMinutes);
		return totalMinutes;
	}
	var timeString;
	var startHour = 7;
	var formatChange = 12 - startHour;

	var hours = startHour + Math.floor(totalMinutes/60);
	var minutes = totalMinutes%60;
	var format;

	if (Math.floor(totalMinutes/60) >= formatChange)
	{
		if (hours != 12)
			hours = hours - 12;
		format = "PM";
	}
	else
		format = "AM";


	timeString = hours + ":" + minutes + " " + format;
	console.log(timeString);
	return timeString;
}
</script>

<script>
$('#durationSelector').on('change', function()
{
	$('.removeOnClear').remove(); //Clear all cells
	$('#datepicker').datepicker('update',''); // clear all dates

	var selectedDuration = $("#durationSelector").val();

	var offset = 0;
	var minutes = 0;
	var hourInMinutes = 60;
	var totalHours = 12;


	switch(selectedDuration)
	{
		case "15 Minutes":

			var durationOffset = 4;
			var durationSlots = 3;
			var minutesIncrement = 15;
			break;

		case "30 Minutes":

			var durationOffset = 2;
			var durationSlots = 1;
			var minutesIncrement = 30;
			break;

		case "1 Hour":
			return;
			break;
	}

	for (i = 0; i < totalHours; i++)
	{
		for (j = 0; j < durationSlots; j++)
		{
			minutes = minutes + minutesIncrement;
			var newRow = $('<tr><th><div>'+minutes+'</div></th></tr>');
			newRow.addClass("removeOnClear");
			newRow.children().children().addClass("doNotDisplay");
			$('#timeSelector tr').eq(offset+j+1).after(newRow);
		}
		minutes = (hourInMinutes * (i+1));
		offset = offset + durationOffset;
	}
});
</script>

 <!-- Menu Toggle Script -->
 <script>
    $("#menu-toggle").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });
 </script>


<script>
// Source: https://jsfiddle.net/christianklemp_imt/b20paum2/
$(document).ready(function() {

    $('#datepicker').datepicker({
        startDate: new Date(),
        multidate: true,
        format: "mm/dd/yyyy",
        daysOfWeekHighlighted: "5,6",
        datesDisabled: ['31/08/2017'],
        language: 'en'

    }).on('changeDate', function(e) {

		dragTable(); // Add event handler

		// `e` here contains the extra attributes

        //$(this).find('.input-group-addon .count').text(' ' + e.dates.length);

		//Check if date exists in table
		var hasColumn = $('#timeSelector thead th').filter(function() {
			return this.textContent === e.format();
		}).length > 0;


		//-- check if column date exists.
		if (hasColumn === false && e.format() != "")
		{
			addNewCol(e); // Add if it is. Otherwise remove it.
			dragTable(); // Add event handler
		}
		else if (hasColumn === false && e.format() == "") // First column remove edge case
		{
			removeColumn();
			dragTable(); // Add event handler
		}
		else if (hasColumn === true && e.format() != "") // Remove columns
		{
			removeColumn();
			dragTable(); // Add event handler
		}

    });



});

</script>

<script>
function removeColumn(){

		var removedDate;
		var inputString = document.getElementById('Dates').value;

			$( "#timeSelector thead tr th" ).each(function( index ) {
				if (index != 0)
				{
					if (inputString.indexOf($(this).text()) >= 0)
					{
						// Date is still selected. Keep searching.
					}
					else
					{

						removedDate = $(this).text();

						index++;

						$('#timeSelector tr td:nth-child('+index+')').each(function(){
							//$(this).text("");
							//$(this).removeClass("selected");
							$(this).remove();
						});

						$(this).remove();

						return;

					}
				}
			});

}

</script>

<script>
function addNewCol(e)
{
		var dateName = e.format();
		var newDateHeader = $('<th></th>');
		newDateHeader.text(e.format());
		newDateHeader.addClass("removeOnClear");
		$("#timeSelector tr:first").append(newDateHeader);

		var newDateColumn = $('<td></td>');
		var timeDialogue = $('<div></div>');


		timeDialogue.addClass('doNotDisplay');

		newDateColumn.append(timeDialogue);
		newDateColumn.addClass("removeOnClear");
		$("#timeSelector tr").not(':first').not(':last').append(newDateColumn);

}
</script>

<script>
function cellCount() {
  var num = 0;
  var slot = {startDate: "", endDate: ""};
  var slotArray = [];
  $("#timeSelector thead tr th").each(function(index) {
    if (index != 0) {
      var currDate = $(this).text();
      index++;
      $('#timeSelector tr td:nth-child('+index+')').each(function() {
        if($(this).hasClass("selected")){
          var currTime = $(this).closest('tr').find('th').text();
          console.log(currTime);
          console.log(currDate);
        }
      });
    }
  });

}




function dragTable() {
		// Source: http://jsfiddle.net/few5E/
		  var isMouseDown = false;
		  var textHolder;

		  $("#timeSelector td")
			.mousedown(function () {
			  isMouseDown = true;
			  $(this).toggleClass("selected");

			  // if ($(this).hasClass("selected"))
			  // {
				//  $(this).children().text(minutesToFormat($(this).closest('tr').find('th').text()));
			  // }
			  // else
			  //    $(this).children().text("");

			  return false; // prevent text selection
			})
			.mouseover(function () {
			  if (isMouseDown) {
				$(this).toggleClass("selected");


				// if ($(this).hasClass("selected"))
			  //   {
				//     $(this).children().text($(this).children().text(minutesToFormat($(this).closest('tr').find('th').text())));
			  //   }
			  //   else
			  //     $(this).children().text("");
        //
		}
  });
		  $(document)
			.mouseup(function () {
			  isMouseDown = false;
			});
}
</script>
