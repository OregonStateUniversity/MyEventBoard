{% extends 'layouts/logged_in.twig' %}

{% block page_content %}

<div class="align-items-center d-md-flex justify-content-between">
  <h1 class="h2 mb-4">
    {{title}}
  </h1>
  <form class="form-inline mb-4" method="get">
    <input class="form-control mr-sm-2" name="q" type="search" value="{{search_term}}">
    <button class="btn btn-primary my-2 my-sm-0">
      Search
    </button>
  </form>
</div>
{% if search_term and search_result_count > 0 %}
  <p>
    Found {{search_result_count}} result{% if search_result_count != 1 %}s{% endif %}
  </p>
{% endif %}

{% if meetings %}
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Location</th>
        <th scope="col">Dates</th>
        <th scope="col">Available Slots</th>
        <th scope="col">RSVP Link</th>
      </tr>
    </thead>
    <tbody>
      {% for meeting in meetings %}
        <tr>
          <td><a href="{{site_url}}/meetings/{{meeting.id}}">{{meeting.title}}</a></td>
          <td>{{meeting.location}}</td>
          <td>
            {% for date in meeting.dates %}
              {{date}}<br>
            {% endfor %}
          </td>
          <td>{{meeting.slots_available}} / {{meeting.slots}}</td>
          <td><a href="{{site_url}}/meetings/{{meeting.id}}/rsvp">RSVP</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  {% if search_term %}
    <p>No results found</p>
  {% else %}
    <p>Nothing here yet!</p>
  {% endif %}
{% endif %}

{% endblock %}
