{% extends 'layouts/logged_in.twig' %}

{% block page_content %}

<div class="align-items-center d-md-flex justify-content-between">
  <h1 class="h2 mb-4">
    {{title}}
  </h1>
  <form class="form-inline mb-4" method="get">
    <div>
      <input class="form-control mr-sm-2" name="q" type="search">
    </div>
    <div class="pl-3 pl-md-1">
      <button class="btn btn-primary my-2 my-sm-0">
        Search
      </button>
    </div>
  </form>
</div>
{% if search_term and search_result_count > 0 %}
  <p>
    Found {{search_result_count}} result{% if search_result_count != 1 %}s{% endif %} for "{{search_term}}"
  </p>
{% endif %}
{% if search_term %}
  {% if search_meetings %}
    <div class="row">
      <div class="col-lg-6 col-md-12">
        {% for meeting in search_meetings %}
          {{ include('meetings/_meeting_card.twig') }}
        {% endfor %}
      </div>
    </div>
  {% else %}
    <p>No results found</p>
  {% endif %}
{% else %}
  <nav>
    <div class="nav nav-tabs" role="tablist">
      <a class="nav-item nav-link active" id="all-meetings-tab" data-toggle="tab" href="#all-meetings" role="tab" aria-controls="all-meetings" aria-selected="false">
        All Upcoming Meetings
      </a>
      {% if created_meetings %}
        <a class="nav-item nav-link" id="my-meetings-tab" data-toggle="tab" href="#my-meetings" role="tab" aria-controls="my-meetings" aria-selected="true">
          Meetings Created By Me
        </a>
      {% endif %}
      {% if past_meetings %}
        <a class="nav-item nav-link" id="past-meetings-tab" data-toggle="tab" href="#past-meetings" role="tab" aria-controls="past-meetings" aria-selected="false">
          Past Meetings
        </a>
      {% endif %}
      {% if rsvps %}
        <a class="nav-item nav-link" id="rsvps-tab" data-toggle="tab" href="#rsvps" role="tab" aria-controls="rsvps" aria-selected="false">
          <strong>RSVPs (2)</Strong>
        </a>
      {% endif %}
    </div>
  </nav>
  <div class="row">
    <div class="col-lg-6">
      <div class="tab-content pt-3">
        <div class="tab-pane fade show active" id="all-meetings" role="tabpanel" aria-labelledby="all-meetings-tab">
          {% if upcoming_meetings %}
            {% for meeting in upcoming_meetings %}
              {{ include('meetings/_meeting_card.twig') }}
            {% endfor %}
          {% else %}
            <p>
              Nothing scheduled yet!
            </p>
          {% endif %}
        </div>
        {% if created_meetings %}
          <div class="tab-pane fade" id="my-meetings" role="tabpanel" aria-labelledby="my-meetings-tab">
            {% for meeting in created_meetings %}
              {{ include('meetings/_meeting_card.twig') }}
            {% endfor %}
          </div>
        {% endif %}
        {% if past_meetings %}
          <div class="tab-pane fade" id="past-meetings" role="tabpanel" aria-labelledby="past-meetings-tab">
            {% for meeting in past_meetings %}
              {{ include('meetings/_meeting_card.twig') }}
            {% endfor %}
          </div>
        {% endif %}
        {% if past_meetings %}
          <div class="tab-pane fade" id="rsvps" role="tabpanel" aria-labelledby="rsvps-tab">
            <p>
             TODO: Show RSVPs.
            </p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
{% endif %}

{% endblock %}
